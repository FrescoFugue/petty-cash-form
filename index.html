<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>แบบฟอร์มเบิกเงินสดย่อย</title>
</head>
<body>
  <h2>แบบฟอร์มเบิกเงินสดย่อย</h2>

  <form id="pettyForm">
    <label>ชื่อผู้เบิก</label><br />
    <input name="requester" required /><br /><br />

    <label>รายการเบิก (1 รายการต่อบรรทัด)</label><br />
    <textarea name="items" rows="5" required></textarea><br /><br />

    <label>ยอดรวม</label><br />
    <input type="number" name="amount" required /><br /><br />

    <button type="submit">ส่งคำขอ</button>
  </form>

  <script>
    const SECRET = "PCASH_2025_SECRET";

    document.getElementById("pettyForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(e.target);
      formData.append("secret", SECRET);

      const res = await fetch(
        "https://YOUR-N8N/webhook/petty-cash",
        {
          method: "POST",
          body: formData
        }
      );

      if (res.ok) {
        alert("ส่งข้อมูลเรียบร้อย");
        e.target.reset();
      } else {
        alert("เกิดข้อผิดพลาด");
      }
    });
  </script>
</body>
</html>
